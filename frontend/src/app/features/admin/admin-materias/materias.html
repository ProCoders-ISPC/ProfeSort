<div class="form-container">
    <div class="table-header">
        <div class="table-title">Añadir Nueva Materia</div>
    </div>

    <!-- Formulario -->
    <form (ngSubmit)="guardar()" #materiaForm="ngForm">
        <input type="hidden" [(ngModel)]="formData.id" name="id">

        <div class="mb-3">
            <label class="form-label">Nombre de la materia</label>
            <input type="text" class="form-control" [(ngModel)]="formData.nombre" name="nombre"
                placeholder="Ej: Matemática" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Código</label>
            <input type="text" class="form-control" [(ngModel)]="formData.codigo" name="codigo"
                placeholder="Ej: MAT101" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Profesor</label>
            <select class="form-control" [(ngModel)]="formData.profesor" name="profesor" required>
                <option value="">Seleccione un profesor</option>
                <option>Prof. Juan Pérez</option>
                <option>Prof. Ana Gómez</option>
                <option>Prof. Carlos Ruiz</option>
            </select>
        </div>

        <div class="form-actions d-flex gap-2">
            <button type="submit" class="btn btn-primary">{{ editandoId ? 'Actualizar' : 'Guardar'
                }}</button>
            <button type="button" class="btn btn-secondary" (click)="resetForm()">Cancelar</button>
        </div>
    </form>

    <!-- Alerts -->
    <div *ngIf="alertSuccess" class="alert alert-success mt-3">{{ alertSuccess }}</div>
    <div *ngIf="alertError" class="alert alert-danger mt-3">{{ alertError }}</div>
    <div *ngIf="showEliminar" class="alert alert-warning mt-3">
        ¿Está seguro que desea eliminar la materia?
        <button class="btn btn-danger btn-sm ms-2" (click)="eliminar()">Eliminar</button>
        <button class="btn btn-secondary btn-sm ms-1" (click)="cancelarEliminar()">Cancelar</button>
    </div>
    <div *ngIf="sinMaterias" class="alert alert-info mt-3">No hay materias cargadas</div>

    <!-- Tabla -->
    <div class="table-header mt-4">
        <div class="table-title">Listado de Materias</div>
    </div>
    <div class="table-responsive">
        <table class="table docente-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Código</th>
                    <th>Profesor</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let m of materias">
                    <td>{{ m.nombre }}</td>
                    <td>{{ m.codigo }}</td>
                    <td>{{ m.profesor }}</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary me-1" (click)="editar(m)">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" (click)="confirmarEliminar(m.id)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>