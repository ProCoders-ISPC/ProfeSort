<div class="main-wrapper">
  <main class="main-content">
    <!-- Listado de Estudiantes -->
    <section class="table-container">
      <div class="table-header">
        <h2 class="table-title">Mis Estudiantes</h2>
        <div class="table-actions">
          <input type="search" 
                 [(ngModel)]="searchTerm"
                 (ngModelChange)="filtrarEstudiantes()"
                 placeholder="Buscar estudiante..." 
                 class="form-control search-input">
        </div>
      </div>
      
      <!-- Mensaje de error -->
      @if (errorMessage) {
        <div class="alert alert-danger">
          <p>{{ errorMessage }}</p>
          <button (click)="cargarEstudiantes()" class="btn btn-sm btn-outline-primary">
            Reintentar
          </button>
        </div>
      }
      
      <!-- Indicador de carga -->
      @if (isLoading) {
        <div class="loading-container">
          <p>Cargando estudiantes...</p>
        </div>
      }
      
      @if (!isLoading) {
        <div class="table-responsive">
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Apellidos</th>
                <th>DNI</th>
                <th>Correo Electrónico</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              @for (estudiante of estudiantesFiltrados; track estudiante.id) {
                <tr>
                  <td>{{estudiante.nombre}}</td>
                  <td>{{estudiante.apellidos}}</td>
                  <td>{{estudiante.dni}}</td>
                  <td>{{estudiante.email}}</td>
                  <td>
                    <span class="badge" [class.badge-success]="estudiante.estado === 'Activo'"
                                       [class.badge-warning]="estudiante.estado === 'Pendiente'"
                                       [class.badge-secondary]="estudiante.estado === 'Inactivo'">
                      {{estudiante.estado}}
                    </span>
                  </td>
                </tr>
              } @empty {
                <tr>
                  <td colspan="5" class="text-center empty-message">
                    @if (searchTerm) {
                      <i class="fas fa-search"></i>
                      <p>No se encontraron estudiantes con "{{ searchTerm }}"</p>
                    } @else {
                      <i class="fas fa-user-graduate"></i>
                      <p>Aún no se le han asignado estudiantes.</p>
                      <small>Contacta con el administrador para que te asigne estudiantes.</small>
                    }
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      }
    </section>
  </main>
</div>