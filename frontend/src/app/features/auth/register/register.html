<app-back-to-home-button>Volver al inicio</app-back-to-home-button>

<section class="register">
  <div class="register__container">
    <h2 class="register__title">¡Registrate para usar Profesort!</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register__form">
      
      <div class="register__form-row">
        <div class="register__form-group">
          <label class="register__label" for="nombre">Nombre *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('nombre')"
            type="text"
            id="nombre"
            formControlName="nombre"
            placeholder="Ingrese su nombre">
          <div class="register__error-container">
            @if (hasFieldError('nombre')) {
              <div class="register__error">
                {{ getFieldError('nombre') }}
              </div>
            }
          </div>
        </div>
        <div class="register__form-group">
          <label class="register__label" for="apellido">Apellido *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('apellido')"
            type="text"
            id="apellido"
            formControlName="apellido"
            placeholder="Ingrese su apellido">
          <div class="register__error-container">
            @if (hasFieldError('apellido')) {
              <div class="register__error">
                {{ getFieldError('apellido') }}
              </div>
            }
          </div>
        </div>
      </div>


      <div class="register__form-row">
        <div class="register__form-group">
          <label class="register__label" for="dni">DNI *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('dni')"
            type="text"
            id="dni"
            formControlName="dni"
            placeholder="Ingrese su DNI"
            maxlength="8">
          <div class="register__error-container">
            @if (hasFieldError('dni')) {
              <div class="register__error">
                {{ getFieldError('dni') }}
              </div>
            }
          </div>
        </div>
        <div class="register__form-group">
          <label class="register__label" for="fechaNacimiento">Fecha de Nacimiento *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('fechaNacimiento')"
            type="date"
            id="fechaNacimiento"
            formControlName="fechaNacimiento">
          <div class="register__error-container">
            @if (hasFieldError('fechaNacimiento')) {
              <div class="register__error">
                {{ getFieldError('fechaNacimiento') }}
              </div>
            }
          </div>
        </div>
      </div>


      <div class="register__form-row">
        <div class="register__form-group">
          <label class="register__label" for="domicilio">Domicilio *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('domicilio')"
            type="text"
            id="domicilio"
            formControlName="domicilio"
            placeholder="Ingrese su domicilio">
          <div class="register__error-container">
            @if (hasFieldError('domicilio')) {
              <div class="register__error">
                {{ getFieldError('domicilio') }}
              </div>
            }
          </div>
        </div>
        <div class="register__form-group">
          <label class="register__label" for="telefono">Teléfono *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('telefono')"
            type="tel"
            id="telefono"
            formControlName="telefono"
            placeholder="Ingrese su teléfono"
            maxlength="15">
          <div class="register__error-container">
            @if (hasFieldError('telefono')) {
              <div class="register__error">
                {{ getFieldError('telefono') }}
              </div>
            }
          </div>
        </div>
      </div>


      <div class="register__form-row">
        <div class="register__form-group">
          <label class="register__label" for="email">Correo electrónico *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('email')"
            type="email"
            id="email"
            formControlName="email"
            placeholder="usuario@ejemplo.com">
          <div class="register__error-container">
            @if (hasFieldError('email')) {
              <div class="register__error">
                {{ getFieldError('email') }}
              </div>
            }
          </div>
        </div>
        <div class="register__form-group">
          <label class="register__label" for="confirmarEmail">Confirmar correo *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('confirmarEmail')"
            type="email"
            id="confirmarEmail"
            formControlName="confirmarEmail"
            placeholder="usuario@ejemplo.com">
          <div class="register__error-container">
            @if (hasFieldError('confirmarEmail')) {
              <div class="register__error">
                {{ getFieldError('confirmarEmail') }}
              </div>
            }
          </div>
        </div>
      </div>

      <div class="register__form-row">
        <div class="register__form-group">
          <label class="register__label" for="password">Contraseña *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('password')"
            type="password"
            id="password"
            formControlName="password"
            placeholder="Mínimo 6 caracteres">
          <div class="register__error-container">
            @if (hasFieldError('password')) {
              <div class="register__error">
                {{ getFieldError('password') }}
              </div>
            }
          </div>

          @if (registerForm.get('password')?.touched && registerForm.get('password')?.value) {
            <div class="register__password-requirements">
              <small class="register__password-hint">La contraseña debe contener:</small>
              <ul class="register__password-checklist">
                <li [class.valid]="hasUppercase()">
                  ✓ Una mayúscula
                </li>
                <li [class.valid]="hasNumber()">
                  ✓ Un número
                </li>
                <li [class.valid]="hasMinLength()">
                  ✓ Mínimo 6 caracteres
                </li>
              </ul>
            </div>
          }
        </div>
        <div class="register__form-group">
          <label class="register__label" for="confirmarPassword">Confirmar contraseña *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('confirmarPassword')"
            type="password"
            id="confirmarPassword"
            formControlName="confirmarPassword"
            placeholder="Repita la contraseña">
          <div class="register__error-container">
            @if (hasFieldError('confirmarPassword')) {
              <div class="register__error">
                {{ getFieldError('confirmarPassword') }}
              </div>
            }
          </div>
        </div>
      </div>

      <div class="register__form-row">
        <div class="register__form-group register__form-group--full-width">
          <label class="register__label" for="legajo">Legajo *</label>
          <input
            class="register__input"
            [class.register__input--error]="hasFieldError('legajo')"
            type="text"
            id="legajo"
            formControlName="legajo"
            placeholder="Ingrese su legajo">
          <div class="register__error-container">
            @if (hasFieldError('legajo')) {
              <div class="register__error">
                {{ getFieldError('legajo') }}
              </div>
            }
          </div>
        </div>
      </div>

      <div class="register__checkbox">
        <input
          class="register__checkbox-input"
          [class.register__checkbox-input--error]="hasFieldError('terminos')"
          type="checkbox"
          id="terminos"
          formControlName="terminos">
        <div style="flex: 1;">
          <label class="register__checkbox-label" for="terminos">
            Acepto los <a href="#" target="_blank">términos y condiciones</a> *
          </label>
          <div class="register__error-container">
            @if (hasFieldError('terminos')) {
              <div class="register__error">
                Debe aceptar los términos y condiciones
              </div>
            }
          </div>
        </div>
      </div>

      @if (registrationMessage || registrationError) {
        <div class="register__messages">
          @if (registrationMessage) {
            <div class="register__success-message">
              {{ registrationMessage }}
            </div>
          }
          @if (registrationError) {
            <div class="register__error-message">
              {{ registrationError }}
            </div>
          }
        </div>
      }

      <button 
        class="register__button" 
        type="submit"
        [disabled]="isLoading">
        @if (!isLoading) { <span>Registrarse</span> }
        @if (isLoading) { <span>Registrando...</span> }
      </button>

      <div class="register__login-link">
        <p>¿Ya tienes una cuenta? <a routerLink="/login" class="register__login-link-text">Inicia sesión</a></p>
      </div>
      
      <p class="register__required-note">
        <small>Los campos marcados con * son obligatorios</small>
      </p>
    </form>
  </div>
</section>

<app-background></app-background>


